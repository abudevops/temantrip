!function(t){var e=function(e,a){this.options=a;var i=t(e),r=i.is("img"),n=r?i.attr("src"):i.backgroundImageUrl();n=this.options.generateUrl(i,n);t("<img/>").attr("src",n).load(function(){r?i.attr("src",t(this).attr("src")):(i.backgroundImageUrl(t(this).attr("src")),i.backgroundSize(t(this)[0].width,t(this)[0].height)),i.attr("data-retina","complete")})};e.prototype={constructor:e},t.fn.retinaReplace=function(a){return 1>=(void 0===window.devicePixelRatio?1:window.devicePixelRatio)?this:this.each(function(){var i=t(this),r=i.data("retinaReplace"),n=t.extend({},t.fn.retinaReplace.defaults,i.data(),"object"==typeof a&&a);r||i.data("retinaReplace",r=new e(this,n)),"string"==typeof a&&r[a]()})},t.fn.retinaReplace.defaults={suffix:"_2x",generateUrl:function(t,e){var a=e.lastIndexOf("."),i=e.substr(a+1);return e.substr(0,a)+this.suffix+"."+i}},t.fn.retinaReplace.Constructor=e,t.fn.backgroundImageUrl=function(e){return e?this.each(function(){t(this).css("background-image",'url("'+e+'")')}):t(this).css("background-image").replace(/url\(|\)|"|'/g,"")},t.fn.backgroundSize=function(e,a){var i=Math.floor(e/2)+"px "+Math.floor(a/2)+"px";t(this).css("background-size",i),t(this).css("-webkit-background-size",i)},t(function(){t("[data-retina='true']").retinaReplace()})}(window.jQuery);